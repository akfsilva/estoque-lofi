<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estoque Doméstico</title>

<style>
:root{
  --green:#33ff66;
  --bg:#000;
  --border:#1aff5c;
  --glow:0 0 6px rgba(51,255,102,.7);
}
*{box-sizing:border-box;font-family:"Courier New",monospace}
body{margin:0;background:var(--bg);color:var(--green)}
.container{padding:16px;max-width:900px;margin:auto}
h1,h2{text-align:center;text-shadow:var(--glow)}
input,button{
  width:100%;padding:10px;margin:6px 0;
  background:#000;color:var(--green);
  border:1px solid var(--border);font-size:16px
}
button{cursor:pointer}
.category{border:1px solid var(--border);margin-bottom:12px}
.category-header{
  padding:12px;font-size:18px;
  cursor:pointer;background:rgba(0,255,100,.08)
}
.category-content{display:none;padding:10px}
.item{border:1px solid var(--border);padding:10px;margin-bottom:10px}
.item-header{display:flex;justify-content:space-between}
.delete{color:red;cursor:pointer;font-weight:bold}
label{font-size:14px}
.scan::before{
  content:"";position:fixed;top:0;left:0;width:100%;height:100%;
  pointer-events:none;
  background:repeating-linear-gradient(
    to bottom,rgba(255,255,255,.03),
    rgba(255,255,255,.03) 1px,
    transparent 1px,transparent 3px)
}
</style>
</head>

<body class="scan">
<div class="container">

<h1>ESTOQUE DOMÉSTICO</h1>

<h2>Adicionar item</h2>
<input id="name" placeholder="Nome do item">
<input id="category" placeholder="Categoria">
<input id="current" type="number" placeholder="Quantidade atual">
<input id="goal" type="number" placeholder="Meta anual">
<button onclick="addItem()">ADICIONAR</button>

<hr>

<div id="categories"></div>

</div>

<script>
const KEY="estoque_domestico";

/* ===== SEED INICIAL (SÓ SE STORAGE ESTIVER VAZIO) ===== */
const initialItems = [
  // Alimentos
  {name:"Arroz (kg)",category:"Alimentos",current:16,goal:18},
  {name:"Feijão (kg)",category:"Alimentos",current:4,goal:12},
  {name:"Macarrão parafuso (kg)",category:"Alimentos",current:2,goal:12},
  {name:"Sal (kg)",category:"Alimentos",current:1,goal:2},
  {name:"Açúcar cristal (kg)",category:"Alimentos",current:4.5,goal:6},
  {name:"Óleo soja (L)",category:"Alimentos",current:3,goal:6},
  {name:"Óleo misto (L)",category:"Alimentos",current:1,goal:3},
  {name:"Molho de tomate (sachê)",category:"Alimentos",current:3,goal:12},
  {name:"Sardinha (lata)",category:"Alimentos",current:2,goal:24},
  {name:"Cappuccino (g)",category:"Alimentos",current:200,goal:1000},
  {name:"Geleia framboesa",category:"Alimentos",current:1,goal:4},
  {name:"Café descafeinado (g)",category:"Alimentos",current:250,goal:1000},

  // Higiene
  {name:"Sabonete antibacteriano",category:"Higiene",current:14,goal:24},
  {name:"Sabonete comum",category:"Higiene",current:7,goal:24},
  {name:"Desodorante antibacteriano",category:"Higiene",current:1,goal:12},
  {name:"Desodorante comum",category:"Higiene",current:1,goal:12},
  {name:"Pasta dente sensível",category:"Higiene",current:2,goal:12},
  {name:"Pasta dente comum",category:"Higiene",current:3,goal:12},
  {name:"Bucha (pacote)",category:"Higiene",current:2,goal:6},
  {name:"Sabão caseiro (barra)",category:"Higiene",current:10,goal:24},
  {name:"Papel absorvente",category:"Higiene",current:1,goal:6}
];

function load(){
  let data=JSON.parse(localStorage.getItem(KEY));
  if(!data || data.length===0){
    data=initialItems.map(i=>({...i,id:Date.now()+Math.random()}));
    localStorage.setItem(KEY,JSON.stringify(data));
  }
  return data;
}

function save(d){localStorage.setItem(KEY,JSON.stringify(d))}

function addItem(){
  const d=load();
  d.push({
    id:Date.now(),
    name:name.value,
    category:category.value,
    current:Number(current.value),
    goal:Number(goal.value)
  });
  save(d);render();
  name.value=category.value=current.value=goal.value="";
}

function del(id){
  save(load().filter(i=>i.id!==id));render();
}

function upd(id,f,v){
  const d=load();d.find(i=>i.id===id)[f]=Number(v);save(d);
}

function toggle(id){
  const e=document.getElementById(id);
  e.style.display=e.style.display==="none"?"block":"none";
}

function render(){
  const c=document.getElementById("categories");
  c.innerHTML="";
  const d=load(),g={};
  d.forEach(i=>(g[i.category]=g[i.category]||[]).push(i));
  Object.keys(g).forEach(cat=>{
    const id="c_"+cat.replace(/\s/g,"_");
    c.innerHTML+=`
    <div class="category">
      <div class="category-header" onclick="toggle('${id}')">${cat}</div>
      <div class="category-content" id="${id}">
        ${g[cat].map(i=>`
        <div class="item">
          <div class="item-header">
            <strong>${i.name}</strong>
            <span class="delete" onclick="del(${i.id})">X</span>
          </div>
          <label>Atual</label>
          <input type="number" value="${i.current}" onchange="upd(${i.id},'current',this.value)">
          <label>Meta anual</label>
          <input type="number" value="${i.goal}" onchange="upd(${i.id},'goal',this.value)">
        </div>`).join("")}
      </div>
    </div>`;
  });
}

render();
</script>
</body>
</html>
